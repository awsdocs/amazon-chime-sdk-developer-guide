# Sample use cases<a name="recording-use-cases"></a>

SIP media applications provide call recording actions as building blocks\. They give you the flexibility to build call\-recording solutions for your business use cases\. The following cases illustrate some common usage scenarios\.

**Topics**
+ [Case 1: Recording a one\-legged call that involves SIP actions](#recording-case-1)
+ [Case 2: Selectively recording audio in a bridged call](#recording-case-2)
+ [Case 3: Recording multiple call legs](#recording-case-3)
+ [Case 4: On\-demand recording with pause and resume](#on-demand-pause-resume)

## Case 1: Recording a one\-legged call that involves SIP actions<a name="recording-case-1"></a>

You can record a caller and any audio generated by SIP media application actions, such as the [PlayAudio](play-audio.md) and [PlayAudioAndGetDigits](play-audio-get-digits.md) actions\. During recording, if a caller presses a digit, the recording captures the tone of that digit\. This example uses the `PlayAudioAndGetDigits` action, but the interactive voice response \(IVR\) can be a complex series of SIP media application actions\.

In this example, the SIP media application records both audio tracks between the caller and the SIP media application itself\. The recording starts when the call is established, and it stops when the caller hangs up\. Billing starts when the call is established, and it stops when the caller hangs up\.

![\[Diagram of a SIP media application recording two audio tracks, in this case, between a caller and the app itself.\]](http://docs.aws.amazon.com/chime-sdk/latest/dg/images/sma-recording-case-1.png)

## Case 2: Selectively recording audio in a bridged call<a name="recording-case-2"></a>

You can selectively record the audio track of a single call participant\. You can use this feature to selectively enable call recording only for a specific participant\.

In this example, the SIP media application records the incoming audio tracks between the called party and the SIP media application itself by specifying **call\-id\-2** as the `CallId` and `INCOMING` as the track\. The call recording starts when the caller is bridged to the called party, and that's also when billing starts\. The recording stops when the called party hangs up, and that's also when billing ends\. This recording only has the called party’s audio track\. 

![\[Diagram of a SIP media application selectively recording one track.\]](http://docs.aws.amazon.com/chime-sdk/latest/dg/images/sma-recording-case-2.png)

## Case 3: Recording multiple call legs<a name="recording-case-3"></a>

You can record multiple call legs\. For example, say you bridge a call to a participant\. When that participant hangs up, the phone call is bridged to another participant\. You can enable call recording for all three call legs\. 

This example shows three separate recording files\. The recording for the first call leg captures the conversation between the caller, your application, and the two participants that were bridged into the call\. The recording for the second call leg captures the conversation between the caller and the first participant\. The recording for the third call leg captures the conversation between the caller and the second participant\. 

This case creates three call legs, and billing applies to the start and end of each call leg\. Put another way, the system delivers three recordings to your S3 bucket, and you're billed for each\. 

![\[Diagram of a SIP media application recording multiple call legs.\]](http://docs.aws.amazon.com/chime-sdk/latest/dg/images/sma-recording-case-3.png)

## Case 4: On\-demand recording with pause and resume<a name="on-demand-pause-resume"></a>

You can start, stop, pause, and resume call recording on\-demand using the [UpdateSipMediaApplicationCall](https://docs.aws.amazon.com/chime-sdk/latest/APIReference/API_UpdateSipMediaApplicationCall.html) API\. You can build a client application that calls the `UpdateSipMediaApplicationCall` API and invokes your SIP media application to return call recording actions\.

Your end users use the client application to control the call recording\. For example, in a call center, an agent would use a desktop client application to trigger call recording actions on\-demand\. In the call center example, the agent might ask the caller’s permission to record the phone call, and they can click in the client application to start recording once the caller agrees\. In another example, the caller might need to provide information such as a social security number \(SSN\)\. However, the call center policy requires that the agent should not record information such as a customer’s SSN\. The agent can click the application to pause the recording while the customer provides the information, then click again to resume the recording\. Once the agent handles the caller’s request, the agent clicks the application to stop recording and hangs up the call\.

In this use case, the SIP media application records the audio tracks between the caller and SIP media application\. Since the `call-id-1` leg is bridged to the `call-id-2` leg, the system records the audio on both legs, caller and called\. The recording and the billing start when the `UpdateSipMediaApplicationCall` API invokes the `StartCallRecording` action\. The recording and the billing stop when the `UpdateSipMediaApplicationCall` API invokes the `StopCallRecording` action\. As a reminder, pausing the recording does not change its duration, and you're billed for all pauses\. 

![\[Diagram of a SIP media application recording on-demand with recording paused and resumed.\]](http://docs.aws.amazon.com/chime-sdk/latest/dg/images/sma-recording-on-demand.png)